<html>
    <head>
        <meta charset="utf-8">
        <meta name="description" content="铝棒库存-Blanink">
	    <meta property="og:title" content="铝棒库存-Blanink">
	    <meta property="og:description" content="铝棒库存-Blanink">
        <title>铝棒库存</title>
        <!-- Bootstrap CSS -->
		<link href="css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="js/bootstrap-table-master/dist/bootstrap-table.min.css">
        <link rel="stylesheet" href="js/layui-main/dist/css/layui.css">
        <!-- <link rel="stylesheet" href="js/bootstrap-table-master/src/extensions/fixed-columns/bootstrap-table-fixed-columns.scss"> -->
	    <script type="text/javascript" src="js/layui-main/dist/layui.js"></script>
        
        <style>
            /* .bootstrap-table .fixed-table-container .fixed-table-body {
                overflow-x: auto; 
                overflow-y: auto; 
                height: 61%; 
            } */
            .col, .col-1, .col-10, .col-11, .col-12, .col-2, .col-3, .col-4, .col-5, .col-6, .col-7, .col-8, .col-9, .col-auto, .col-lg, .col-lg-1, .col-lg-10, .col-lg-11, .col-lg-12, .col-lg-2, .col-lg-3, .col-lg-4, .col-lg-5, .col-lg-6, .col-lg-7, .col-lg-8, .col-lg-9, .col-lg-auto, .col-md, .col-md-1, .col-md-10, .col-md-11, .col-md-12, .col-md-2, .col-md-3, .col-md-4, .col-md-5, .col-md-6, .col-md-7, .col-md-8, .col-md-9, .col-md-auto, .col-sm, .col-sm-1, .col-sm-10, .col-sm-11, .col-sm-12, .col-sm-2, .col-sm-3, .col-sm-4, .col-sm-5, .col-sm-6, .col-sm-7, .col-sm-8, .col-sm-9, .col-sm-auto, .col-xl, .col-xl-1, .col-xl-10, .col-xl-11, .col-xl-12, .col-xl-2, .col-xl-3, .col-xl-4, .col-xl-5, .col-xl-6, .col-xl-7, .col-xl-8, .col-xl-9, .col-xl-auto {
                position: relative;
                width: 100%;
                min-height: 1px;
                padding-right: 0px;
                padding-left: 15px;
            }
        </style>
    </head>
    <body>

        <!-- <h4 class="card-title">派工信息列表</h4><br> -->
        <form id="searchForm"  action="" method="post" class="breadcrumb form-search" > <!-- onclick="fullScreen()" -->
            <div class="row layui-form">
                <div class="row">
                    <div class="mb-8 col-md-8">
                        <div class="row">
                            <div class="mb-6  col-md-6  layui-input-wrap" >
                                <input name="departmentMachine" htmlEscape="false" maxlength="100" class="form-control layui-input" lay-affix="clear" placeholder="部门机台" />
                            </div>
                            <div class="mb-3  col-md-3  layui-input-wrap" >
                                <input name="material" htmlEscape="false" maxlength="100" class="form-control layui-input" lay-affix="clear" placeholder="材质" />
                            </div>
                            <div class="mb-4  col-md-4 layui-input-wrap" >
                                <input name="productCode" htmlEscape="false" maxlength="100" class="form-control layui-input" lay-affix="clear" placeholder="货品编码" />
                            </div>
                            <div class="mb-3  col-md-3 layui-input-wrap" >
                                <input name="location" htmlEscape="false" maxlength="100" class="form-control layui-input" lay-affix="clear" placeholder="仓库" />
                            </div>
                            

                            <div class="mb-2  col-md-2" >
                                <input id="btnSubmit" class="btn btn-primary" type="button"  value="查询" />
                            </div>
                        </div>
                    </div>
                    <div class="mb-4 col-md-4">
                        <button class="btn btn-success" type="button"  value="点击全屏" id="full" onclick="fullScreen()">点击全屏</button>
                        <button class="btn btn-danger" type="button" hidden value="点击全屏" id="exitFull" onclick="exitScreen()">退出全屏</button>
                        <button class="btn btn-primary" type="button"  value="点击全屏" id="exitFull" onclick="goBack()">主页</button>
                    </div>
                </div>
            </div>
        </form>

        <table id="contentTable" data-fixed-columns="true" data-fixed-number="1" ></table>

        <script src="js/popper.min.js"></script>
        <!-- <script src="static/js/global.min.js"></script> -->
        <script src="js/jquery v3.5.1.min.js"></script>
        <script src="js/jquery.serializejson.js"></script>
        
        <script src="js/bootstrap.min.js"></script>
        <!-- Latest compiled and minified JavaScript -->
		<script src="js/bootstrap-table-master/dist/bootstrap-table.min.js"></script>
		<!-- Latest compiled and minified Locales -->
		<script src="js/bootstrap-table-master/dist/locale/bootstrap-table-zh-CN.min.js"></script>
        <!-- <script src="js/bootstrap-table-master/src/extensions/fixed-columns/bootstrap-table-fixed-columns.js"></script> -->

        

        <script>

            jQuery(document).ready(function() {
                //console.log("rady");
                loadTable();	
                //$('.fixed-table-body').css('height','70%');
                /* $('.fixed-table-body').css("height","");
                $('.fixed-table-body').css("height",""); */ 
            });


            function loadTable(){
                var url = "http://192.168.0.168:8080/nextal/customerOrder/list";
                var columns=[{
                        field: 'customerNo',
                        title: '客户代号',
                        align: 'center',
                        formatter:function(value,row,index){
                            return row.customerNo;
                        } 
                    },{
                        field: 'moNo',
                        title: '制令单号',
                        align: 'center'
                        /* formatter:function(value,row,index){
                            return '<a href="javascript:void(0)" onclick="companyProductView(\''+row.id+'\')">'+row.productCoding+'</a>';
                        } */
                    },{
                        field: 'departmentMachine',
                        title: '部门机台',
                        align: 'center'
                    },{
                        field: 'moldDrawingNo',
                        title: '模具图号',
                        align: 'center'
                    },{
                        field: 'mrpNo',
                        title: '货品代号',
                        align: 'center'
                    },{
                        field: 'spec',
                        title: '规格',
                        align: 'center'
                    },{
                        field: 'material',
                        title: '材质',
                        align: 'center',
                        formatter:function(value,row,index){
                            return row.material;
                        }
                    },{
                        field: 'orderQty',
                        title: '订单量',
                        align: 'center',
                        formatter:function(value,row,index){
                            return row.orderQty;
                        }
                    },{
                        field: 'finishedQty',
                        title: '已完工量',
                        align: 'center'
                    },{
                        field: 'unfinishedQty',
                        title: '未完工量',
                        align: 'center'
                    },{
                        field: 'startDate',
                        title: '预开工日',
                        align: 'center'
                    },{
                        field: 'endDate',
                        title: '预完工日',
                        align: 'center'
                    },{
                        field: 'remark',
                        title: '备注',
                        align: 'center'
                    }/* ,{

                        field: 'id',
                        title: '操作',
                        align: 'center',
                        formatter:function(value,row,index){
                            return '<a href="javascript:void(0)" onclick="print(\''+row.id+'\')">打印标签</a>';
                        }
                    } */];


                $("#contentTable").bootstrapTable({
                    url: url, 
					method: 'get',
                    columns:columns,
                    contentType : "application/json",
                    cache: false,
                    detailView:false,
                    detailFormatter:null, 
                    //toolbar:'#toolbar',   
                    showExport: false,//显示导出按钮  
                    exportDataType: "all",//导出类型
                    //onExpandRow: function (index, row, $detail) {},
                    queryParams: function(params){
                        var obj = $("#searchForm").serializeJSON();
                        obj.pageSize= params.limit;
                        obj.pageNo= Math.ceil(params.offset/params.limit) + 1; // 页码
                        obj.orderBy= params.sort;
                        obj.sortOrder=params.order;
                        //console.log(JSON.stringify(obj));
                        return obj;
                    }, //参数  
                    queryParamsType: "limit", //参数格式,发送标准的RESTFul类型的参数请求  
                    pagination:true,
                    sidePagination: "server", //服务端处理分页
                    resizable:true,
                    pageSize:10,
                    pageList:[10,50,100],
                    //onEditableSave:onEditableSave,
                    formatLoadingMessage: function () {  
                        return "请稍等，玩命加载中...";  
                    }
                });
            }

			$("#btnSubmit").click(function(){
				//点击查询后激活导出链接
				$("#toolbar").show(); //移除disabled属性
				$("#contentTable").bootstrapTable('refresh');
			}); 

            function print(id){
                //console.log(id);
                layui.use("layer",function(){
					var tab=layer.open({
						type: 2,
						title: '流转单打印',
						shadeClose: true,
						shade: [0.1,'#fff'],
						area: ['300px', '200px'],
						//btn: ['登陆'],
						closeBtn:2,
						shadeClose:false,
						content: './rk-workOrderPrint.html',
                        success: function(layero, index){
                            var body = layer.getChildFrame('body', index);
                            //var iframeWin = window[layero.find('iframe')[0]['name']]; //得到iframe页的窗口对象，执行iframe页的方法：iframeWin.method();
                            body.find('#orderId').attr('value',id);
                            $("#contentTable").bootstrapTable('refresh');
                            
                        }
					}); 
				});
            }

            function fullScreen() {
			// documentElement 属性以一个元素对象返回一个文档的文档元素
                $('#full').attr("hidden","hidden");
                $('#exitFull').removeAttr("hidden");
				var el = document.documentElement;
				el.requestFullscreen||el.mozRequestFullScreen||el.webkitRequestFullscreen||el.msRequestFullScreen?
				el.requestFullscreen()||el.mozRequestFullScreen()|| el.webkitRequestFullscreen()||el.msRequestFullscreen():null;
			}

            function exitScreen() {
                $('#exitFull').attr("hidden","hidden");
                $('#full').removeAttr("hidden");
                var el = document;
                var cfs = el.cancelFullScreen || el.webkitCancelFullScreen || el.mozCancelFullScreen || el.exitFullScreen;
                if (cfs) {
                    cfs.call(el);
                } else if (typeof window.ActiveXObject !== "undefined") {
                    //IE浏览器，模拟按下F11键退出全屏
                    var wscript = new ActiveXObject("WScript.Shell");
                    if (wscript != null) {
                        wscript.SendKeys("{F11}");
                    }
                }
            }
            function goBack(){
                parent.$('#dashboard_bar').empty();
                parent.$('#dashboard_bar').append("  >>REAK MES SYSTEM");
                parent.$('#frame').attr("src","./rk-firstPage.html");
                //$('#sidebar').toggleClass('active');
            }
        </script>
    </body>
</html>

